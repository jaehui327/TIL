# 정규화 (Normalization)

- 정규화(Normalization)의 기본 목표는 테이블 간에 중복된 데이타를 허용하지 않는다는 것
- 중복된 데이터를 허용하지 않음으로써 무결성(Integrity) 유지
- DB 저장 용량 효율화

## 정규화 적용 사례

### 🗂 대상 테이블

- **기존 테이블명**: `INF_DSSN_AJST_REQ_INFO`
- **업무 영역**: 정산 이의조정 신청 정보 관리

---

### 🔍 0단계: 비정규형 (Unnormalized Form, UNF)

| 문제 항목   | 설명                                                        |
| ----------- | ----------------------------------------------------------- |
| 반복 속성   | 신청항목1, 신청항목2, 금액1, 금액2 등 반복적으로 존재       |
| 다중 값     | 하나의 셀에 복수 항목 포함 가능성                           |
| 이행적 종속 | 결과코드 → 결과설명 등                                      |
| 혼합 데이터 | 신청 정보, 항목 정보, 처리 상태, 결과 등이 한 테이블에 혼합 |

---

### ✅ 제1정규형 (1NF): 원자값 분리

| 조치           | 설명                                      |
| -------------- | ----------------------------------------- |
| 반복 속성 분리 | 신청 항목 및 금액을 각각 행(row)으로 분리 |
| 원자값 유지    | 각 셀에 단일값만 존재하도록 구조 변경     |

#### 📌 분리된 테이블

- `OBJC_ADJS_APLC` : 신청항목코드, 금액 등

---

### ✅ 제2정규형 (2NF): 부분 함수 종속 제거

| 조치                                                        | 설명                                                              |
| ----------------------------------------------------------- | ----------------------------------------------------------------- |
| 신청ID + 항목코드 → 금액 <br> → 항목코드에 무관한 속성 분리 | 신청자명, 신청일 등은 신청ID에만 종속 → 신청 마스터 테이블로 분리 |
| 마스터-디테일 구조 설계                                     | 신청 정보(MF) ↔ 신청 항목(Detail)로 분리                          |

#### 📌 분리된 테이블

- `TB_MF_OBJC_ADJS_APLC_L` : 신청자명, 신청일, 부서 등
- `OBJC_ADJS_APLC` : 항목별 금액 등

---

### ✅ 제3정규형 (3NF): 이행적 종속 제거

| 조치           | 설명                                                                      |
| -------------- | ------------------------------------------------------------------------- |
| 코드-설명 분리 | 결과코드(RSLT_CD), 상태코드 등은 코드만 저장하고, 설명은 별도 테이블 관리 |
| 파생 속성 제거 | 변경 전/후 금액은 화면 계산으로 대체, 저장 제거                           |

#### 📌 코드 테이블 예시

- `OBJC_ADJS_APLC_PRGS_STAT_CD` : 신청진행상태코드
- `OBJC_ADJS_RPSB_BLCT_CD` : 조정사유코드
- `OBJC_ADJS_CNTS` : 신청 이력 내용

---

### 🧾 정규화 전후 비교 요약

| 항목        | 비정규형                    | 정규형 (3NF)                         |
| ----------- | --------------------------- | ------------------------------------ |
| 신청자 정보 | 항목 테이블 내 포함         | `TB_MF_OBJC_ADJS_APLC_L` 로 분리     |
| 신청 항목   | 컬럼 반복 (항목1, 항목2...) | `OBJC_ADJS_APLC` 행 단위 분리        |
| 상태/결과   | 코드 + 설명 혼합            | 코드만 저장, 설명은 별도 코드 테이블 |
| 이력관리    | 개별 컬럼 존재              | `OBJC_ADJS_CNTS` 로 이력 테이블화    |

---

### 🏁 결론

- 이 데이터 모델은 **제3정규형 (3NF)** 까지 정규화 완료
- 반복 속성 제거, 의미 단위 테이블 분리, 코드 체계화 등 전형적인 정규화 적용 사례
- 추후 조회 최적화를 위한 **부분 비정규화** (예: 조회용 조인 뷰 구성)는 고려 여지 있음
